# 条件测试

## test条件测试
test命令评估一个表达式，如果条件为真，命令的执行状态码为0，否则不为0。一般通过`$?`来确定状态码

| 语法               | 说明                                                                     |
| ------------------ | ------------------------------------------------------------------------ |
| test <测试表达式>  |                                                                          |
| [ <测试表达式> ]   | 使用中括号，省略test。括号和表达式之间需要有至少一个空格                 |
| [[ <测试表达式> ]] | 使用双中括号，一种特殊场景的扩展语法。括号和表达式之间需要有至少一个空格 |
| ((<测试表达式>))   | 使用双小括号，一般用于if判断语句。括号和表达式不需要空格                 |

### test的表达式
| 参数               | 说明                                         |
| ------------------ | -------------------------------------------- |
| -e 路径            | 判断路径是否存在                             |
| -f 路径            | 判断路径是否存在并且为文件                   |
| -d 路径            | 判断路径是否存在并且为目录                   |
| -L 路径            | 判断路径是否存在并且为链接                   |
| -S 路径            | 判断路径是否存在并且为Socket                 |
| -s 路径            | 判断路径是否存在并且为文件并且非空白         |
| -r 路径            | 判断路径是否存在并且有可读权限               |
| -w 路径            | 判断路径是否存在并且有可读权限               |
| -x 路径            | 判断路径是否存在并且有可执行权限             |
| 路径1 -nt 路径2    | 判断路径1是否比路径2更新                     |
| 路径1 -ot 路径2    | 判断路径1是否比路径2更旧                     |
| 路径1 -ef 路径2    | 判断路径1是与路径指向同一个inode             |
| 数值1 -eq 数值2    | 数值1是否等于数值2                           |
| 数值1 -ne 数值2    | 数值1是否不等于数值2                         |
| 数值1 -gt 数值2    | 数值1是否大于数值2                           |
| 数值1 -lt 数值2    | 数值1是否小于数值2                           |
| 数值1 -ge 数值2    | 数值1是否大于等于数值2                       |
| 数值1 -le 数值2    | 数值1是否小于等于数值2                       |
| -z 字符串          | 判断字符串是否为空                           |
| -n 字符串          | 判断字符串是否不为空，-n可以省略             |
| 字符串1 = 字符串2  | 判断字符串相等，等于号左右两边必须有空格     |
| 字符串1 != 字符串2 | 判断字符串不相等，不等于号左右两边必须有空格 |
| -a                 | and                                          |
| -o                 | or                                           |
| !                  | not                                          |
> 在测试中使用变量，必须使用双引号

## shell
shell对于真假的判断，是从左到右依次执行的
| 命令               | 说明                                      |
| ------------------ | ----------------------------------------- |
| <cmd1> && <cmd2>   | 如果cmd1返回码为0，则执行cmd2，否则退出   |
| <cmd1> \|\| <cmd2> | 如果cmd1返回码不为0，则执行cmd2，否则退出 |

## if语句
```sh
if <条件表达式>
    then
        代码
fi

# 简化版本
if <条件表达式>; then
    代码
fi

# else版本
if <条件表达式>
    then
        代码
else
    代码
fi

# ifelse版本
if <条件表达式1>
    then
        代码
elif <条件表达式2>
    then
        代码
else
    代码
fi
```
