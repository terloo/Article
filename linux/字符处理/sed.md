# sed
sed更适合对文本进行编辑

## 命令
1. sed：stream editer 流编辑器
2. 格式：`sed -r 's#foo#bar#g' something.txt`。`'s#foo#bar#g'`s是功能，g是修饰符，功能之前为匹配条件，功能之后为功能参数

## sed的指定过程
1. 读取一行
2. 判断该行是否符合pattern条件
3. 如果符合则执行对应的功能(替换、显示、删除、增加)
4. 如果**没有**-n选项(--quiet)，则输出该行到标准输出流

## 选项
1. -n：抑制默认输出
2. -r：使用扩展正则
3. -i：将输出替换源文件

## 功能
| 功能  | 说明                                      | 备注                     |
| ----- | ----------------------------------------- | ------------------------ |
| s     | 替换substitute                            | 一般配合-i替换原文件内容 |
| p     | 显示print                                 | 在使用-n选项时使用       |
| d     | 删除(整行)delete                          | 在不使用-n选项时使用     |
| c/a/i | 增加  a追加该行后、i插入改行前、c替代该行 |                          |
| !     | 配合pd功能，表示不显示、删除              |                          |

## 修饰符


## 核心应用

### 查找
1. 指定行号进行查找：`sed -n '3p' <something.txt>`
2. 指定行号的范围进行查找：`sed -n '1,5p' <something.txt>`
3. 指定最后一行：`sed -n '4,$p' <something.txt>`
4. 正则过滤查找：`sed -n '/regex/p' <something.txt>`
5. 正则范围查找：`sed -n '/10:00/,/11:00/p' <something.txt>`查找10点到11点范围内

### 替换、后向引用
| 表达式                | 说明                                                                                 |
| --------------------- | ------------------------------------------------------------------------------------ |
| s#[0-9]##g            | 把数字替换为空，g表示替换该行所有能匹配到的元素，不带g表示替换该行第一个匹配到的元素 |
| s#(\w+)_(\w+)#\2_\1#g | 交换以下划线分隔的两个单词 \数字代表后向引用                                         |