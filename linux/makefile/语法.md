# 语法

## 基本规则
1. 基本子命令
```
TARGET... :DEPENDENCIES...
\tCOMMAD
```
   1. TARGET：目标子命令(文件)，使用`make <TARGET>`来执行该子命令，一个目标命令通常会依赖其他子命令
   2. DEPENDENCIES：目标命令的依赖命令，在执行目标命令前，会执行完该命令的依赖命令
   3. \t：命令体之前必须有一个tab符
   4. COMMAD：命令体
2. makefile的第一个子命令是make默认执行的命令
3. TARGET如果是文件，则会检查DEPENDENCIES中的所有文件，如果DEPENDENCIES中有文件修改时间大于TARGET文件，COMMAND就会执行
4. DEPENDENCIES如果不是文件，则每次都会执行对应的命令

## 伪目标.PHONY
在目标的前一行添加.PHONY，将不会校验目标对应的文件的修改时间，强制执行该command。一般用于不生成文件的目标

## 内置变量
| 选项名 | 作用                 |
| ------ | -------------------- |
| `$@`   | 目标名               |
| `$<`   | 规则的第一个依赖名   |
| `$^`   | 规则的所有依赖名列表 |

## 自定义变量
1. 定义一个自定义变量并赋值：`变量名=变量值`
2. 使用变量：`$(变量名)`

## 自动推导
1. 如果目标为.o文件，将会自动推导依赖.c文件，并且推导出命令`gcc -c xxx.c`

## 内置函数
1. 当前目录下匹配文件：`src=$(wildcard *.c)`
2. 去除路径：`$(notdir $src)`
3. 模式匹配替换：`$(patsubst%.c,%.o,$src)`，等效于`$(src:.c=.0)`
4. 执行shell命令：`$(shell ls)`