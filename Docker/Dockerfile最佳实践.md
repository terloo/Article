# Dockerfile最佳实践

1. 不要安装无效软件包
2. 应简化镜像中同时运行的进程数，理想情况下只应有一个
3. 当无法避免多进程数时，应选择合适的初始化进程(init process)
4. 最小化层级数
   1. 只有RUN、COPY、ADD创建新层，其他指令创建临时层，不会增加镜像大小
   2. 多条RUN指定可以使用连接符简化成一条RUN指令
   3. 使用多段构建减少镜像层数
5. 把多行参数按字母排序，可以减少可能出现的重复参数，并提高可读性
6. 把变更频率更低的编译指令优先构建放置在镜像底层，以有效利用build cache
7. 复制文件时，每个文件独立复制，确保某个文件变更时，只影响对应的缓存