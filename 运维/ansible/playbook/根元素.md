# 根元素

## hosts
playbook中的每个play的目的都是为了让特定的主机以某个指定的用户身份执行某个任务。hosts用于指定要执行任务的主机，须事先定义在主机清单中
```
one.example.com
onw.example.com:two.example.com
192.168.1.50
192.168.1.*
webserver:dbserver   # 两个组的并集
webserver:&dbserver  # 两个组的交集
webserver:!appserver # 在webserver组且不在appserver组
```
```yaml
- hosts: webserver:dbserver
```

## remote_user
指定执行任务所使用的用户

## task
对一个模块调用称为一个task，各个task按顺序在hosts指定的主机上依次执行。每个task都应该指定其name，如果没有name，则结果将用于输出
```yaml
- hosts: webserver
  remote_user: root  # 默认为root
  tasks:
  - name: install httpd
    yum: name=httpd        # module_name: module_args
  - name: start httpd
    yum: name=httpd state=started enabled=yes
```

## handlers和notify
每个task执行完毕时，可以触发一个信号，称为notify。在playbook中，可以配置handlers，来配置指定信号触发时应执行的操作
```yaml
- hosts: webserver
  remote_user: root
  tasks:
  - name: install httpd
    yum: name=httpd
  - name: install config file
    copy: src=files/httpd.conf dest=/etc/httpd/conf/
    notify: restart httpd                            # 如果成功执行了该task，那么会触发一个名为restart httpd的notify
  - name: start httpd
    service: name=httpd state=started enabled=yes
  handlers:
  - name: restart httpd  # 触发的信号
    service: name=httpd state=restarted  # 触发信号后执行的动作
```