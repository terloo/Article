# OSPF协议
开放最短路径优先协议，属于链路状态通告协议中的一种

## 工作步骤
1. 通过交互Hello报文形成邻居关系
2. 通过LSA泛洪通告链路状态信息
3. 通过组建LSDB形成带权有向图(整个网络的拓扑结构)
4. 通过SPF算法计算并形成路由
5. 维护和更新路由表

## 点对点或点到多点型网络建立邻居关系
1. 周期性每隔10s发送hello包，发现有邻居，40s没有收到hello包，认为邻居失效。使用组播地址`224.0.0.5`
2. OSPF区域内唯一标识路由器的IP地址
   1. 使用router-id命令指定RouterID
   2. 选取路由器loopback接口上数值最高的IP地址
   3. 如果没有loopback接口，在物理端口中选取IP地址最高的

## 广播型网络或非广播型多路访问网络建立邻居关系
1. 通过Hello报文选择DR和BDR来代表OSPF网段
   1. 先比较优先级(0-255，默认为1)，后比较routeID
   2. 优先级为0的不参与DR和BDR选举
   3. 通过组播发送hello报文
2. 其他路由器只与DR与BDR形成邻居关系
3. DR/BDR监听组播地址`224.0.0.6`，其他路由器监听组播地址`224.0.0.5`

## SPF(最短路径优先)算法
